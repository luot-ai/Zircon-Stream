# stream开发整理

## 开发
1. coding
2. profiling/debug效率
3. 环境更新xx

## 设计问题

1. **流计算指令**如何获得index：index cnt是一个体系结构状态
   1. 循环变量作为**流计算指令**源操作数
      1. 循环变量i存放在通用寄存器中
      2. 数据相关：通用寄存器相关
      3. 可以处理`部分消耗`
   2. 循环变量不作为**流计算指令**源操作数
      1. 循环变量i存放在硬件寄存器中
      2. 需要额外维护 `step/流计算指令(修改i) -> 流计算指令(使用i)` 的数据相关
         1. 对耦合在流水线的方案也**并没有特别不友好** 
            1. 多发射alu
            2. 待发射指令需要检查在流水线中未改变硬件iter cnt的指令
      3. 方案
         1. 使用step指令
            1. 显示递增计数器
            2. 可以处理`部分消耗`
            3. **可在前端处理这条指令**
         2. 不使用step指令
            1. 由流计算指令驱动计数器递增
            2. 只能处理`完全消耗`


## [V0](./V0/)

这一版是将Stream Engine接到乘除流水线，
在单周期完成 是否就绪的判断 以及 读buffer+算+写buffer的操作

基本完成测试，可循环测试向量加程序并与原始程序对比（但outer iteration=20时仍有bug）


   
## [V1](./V1/)

这一版是将 判断就绪 读buffer 算 写buffer拆开至不同流水级
还没debug






